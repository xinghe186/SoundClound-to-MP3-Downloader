var e,r;"function"==typeof(e=globalThis.define)&&(r=e,e=null),function(r,o,n,s,t){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof a[s]&&a[s],u=l.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function i(e,o){if(!u[e]){if(!r[e]){var n="function"==typeof a[s]&&a[s];if(!o&&n)return n(e,!0);if(l)return l(e,!0);if(c&&"string"==typeof e)return c(e);var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}f.resolve=function(o){var n=r[e][1][o];return null!=n?n:o},f.cache={};var d=u[e]=new i.Module(e);r[e][0].call(d.exports,f,d,d.exports,this)}return u[e].exports;function f(e){var r=f.resolve(e);return!1===r?{}:i(r)}}i.isParcelRequire=!0,i.Module=function(e){this.id=e,this.bundle=i,this.exports={}},i.modules=r,i.cache=u,i.parent=l,i.register=function(e,o){r[e]=[function(e,r){r.exports=o},{}]},Object.defineProperty(i,"root",{get:function(){return a[s]}}),a[s]=i;for(var d=0;d<o.length;d++)i(o[d]);if(n){var f=i(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):t&&(this[t]=f)}}({kgW6q:[function(e,r,o){e("./messaging"),e("../../../background/index")},{"./messaging":"iG3ww","../../../background/index":"lSzt3"}],iG3ww:[function(e,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),s=e("~background/messages/openlogin"),t=n.interopDefault(s),a=e("~background/messages/openpop"),l=n.interopDefault(a),u=e("~background/messages/openprofile"),c=n.interopDefault(u),i=e("~background/messages/signin"),d=n.interopDefault(i);globalThis.__plasmoInternalPortMap=new Map,chrome.runtime.onMessageExternal.addListener((e,r,o)=>(e?.name,!0)),chrome.runtime.onMessage.addListener((e,r,o)=>{switch(e.name){case"openlogin":(0,t.default)({...e,sender:r},{send:e=>o(e)});break;case"openpop":(0,l.default)({...e,sender:r},{send:e=>o(e)});break;case"openprofile":(0,c.default)({...e,sender:r},{send:e=>o(e)});break;case"signin":(0,d.default)({...e,sender:r},{send:e=>o(e)})}return!0}),chrome.runtime.onConnect.addListener(function(e){globalThis.__plasmoInternalPortMap.set(e.name,e),e.onMessage.addListener(function(r){e.name})})},{"~background/messages/openlogin":"ee2mM","~background/messages/openpop":"6wKLY","~background/messages/openprofile":"acm0Z","~background/messages/signin":"fBTnm","@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],ee2mM:[function(e,r,o){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o);let n=async(e,r)=>{let o="https://sound-mp3.com/login?from=extension";"undefined"!=typeof chrome&&chrome.system&&chrome.system.display?chrome.system.display.getInfo(e=>{if(chrome.runtime.lastError){console.error("\u83b7\u53d6\u663e\u793a\u5668\u4fe1\u606f\u65f6\u51fa\u9519:",chrome.runtime.lastError.message),chrome.tabs.create({url:o});return}let r=e[0];if(!r){console.error("\u672a\u627e\u5230\u4e3b\u663e\u793a\u5668\u4fe1\u606f\u3002"),chrome.tabs.create({url:o});return}let n=r.bounds.width,s=r.bounds.height,t=Math.round((n-300)/2)+r.bounds.left,a=Math.round((s-200)/2)+r.bounds.top;chrome.windows.create({url:o,type:"popup",width:300,height:200,left:t,top:a,focused:!0},e=>{chrome.runtime.lastError?(console.error("\u521b\u5efa\u65b0\u7a97\u53e3\u65f6\u51fa\u9519:",chrome.runtime.lastError.message),chrome.tabs.create({url:o})):console.log("\u5c45\u4e2d\u65b0\u7a97\u53e3\u5df2\u6253\u5f00:",e)})}):(window.open(o,"_blank","width=300,height=200,popup"),console.warn("\u975e Chrome \u6269\u5c55\u73af\u5883\u6216 'chrome.system.display' API \u4e0d\u53ef\u7528\uff0c\u4f7f\u7528 window.open \u6253\u5f00\u65b0\u9875\u9762\u3002\u65e0\u6cd5\u81ea\u52a8\u5c45\u4e2d\u3002"))};o.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],f6DG4:[function(e,r,o){o.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},o.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.exportAll=function(e,r){return Object.keys(e).forEach(function(o){"default"===o||"__esModule"===o||r.hasOwnProperty(o)||Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[o]}})}),r},o.export=function(e,r,o){Object.defineProperty(e,r,{enumerable:!0,get:o})}},{}],"6wKLY":[function(e,r,o){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o);let n=async(e,r)=>{try{chrome.action.openPopup(),r.send({success:!0,message:"\u767b\u5f55\u7a97\u53e3\u5df2\u6253\u5f00\u3002"})}catch(e){console.error("Failed to open popup:",e),r.send({success:!1,message:`\u65e0\u6cd5\u6253\u5f00\u767b\u5f55\u7a97\u53e3: ${e.message}`})}};o.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],acm0Z:[function(e,r,o){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o);let n=async(e,r)=>{chrome.tabs.create({url:"https://sound-mp3.com/profile"})};o.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],fBTnm:[function(e,r,o){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o);let n=async(e,r)=>{try{let e=chrome.runtime.getURL("options.html");await chrome.tabs.create({url:e}),r.send({success:!0,message:"\u5df2\u767b\u5f55"})}catch(e){console.error("Failed to signInWithPopup:",e),r.send({success:!1,message:`\u65e0\u6cd5\u767b\u5f55: ${e.message}`})}};o.default=n},{"@parcel/transformer-js/src/esmodule-helpers.js":"f6DG4"}],lSzt3:[function(e,r,o){console.log("Live now; make now always the most precious time. Now will never come again."),chrome.webRequest.onSendHeaders.addListener(e=>{let r=/api-v2\.soundcloud\.com\/tracks\?ids=\d+&.*client_id=/.test(e.url)||/api-v2\.soundcloud\.com\/tracks\/\d+\?.*client_id=.*&oauth_token=/.test(e.url)||/api-v2\.soundcloud\.com\/media\/soundcloud:tracks:\d+\/[^/]+\/stream\/(ctr-encrypted-)?hls\?.*client_id=.*&track_authorization=/.test(e.url);if(!r)return;let o=new URL(e.url),n=o.searchParams.get("client_id"),s=o.searchParams.get("oauth_token");if(!s){let r=e.requestHeaders.find(e=>"authorization"===e.name.toLowerCase());r&&r.value.startsWith("OAuth ")&&(s=r.value.replace("OAuth ",""))}chrome.tabs.sendMessage(e.tabId,{url:e.url,headers:e.requestHeaders,clientId:n,oauthToken:s},e=>{chrome.runtime.lastError})},{urls:["*://*.soundcloud.com/*"]},["requestHeaders"])},{}]},["kgW6q"],"kgW6q","parcelRequire3233"),globalThis.define=r;